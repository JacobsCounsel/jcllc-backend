<!-- JACOBS COUNSEL — AI-Enhanced Outside Counsel Intake -->
<style>
:root {
  --jc-orange: #ff4d00;
  --jc-ink: #0f172a;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --counsel-gold: #d4af37;
  --legal-blue: #1e40af;
  --strategic-gradient: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
  --card-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --glow: 0 0 20px rgba(255, 77, 0, 0.3);
  --counsel-glow: 0 0 30px rgba(212, 175, 55, 0.4);
}

.jc-counsel-intake {
  min-height: 100vh;
  background: var(--strategic-gradient);
  padding: 40px 20px;
  font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
  position: relative;
  overflow: hidden;
}

.jc-counsel-intake::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="legal-grid" width="15" height="15" patternUnits="userSpaceOnUse"><path d="M 15 0 L 0 0 0 15" fill="none" stroke="rgba(212,175,55,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23legal-grid)"/></svg>');
  pointer-events: none;
}

/* Strategic Header */
.counsel-header {
  text-align: center;
  margin-bottom: 40px;
  position: relative;
  z-index: 1;
}

.strategic-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(212, 175, 55, 0.2);
  backdrop-filter: blur(10px);
  padding: 10px 24px;
  border-radius: 50px;
  color: var(--counsel-gold);
  font-weight: 700;
  font-size: 0.9rem;
  margin-bottom: 20px;
  border: 1px solid rgba(212, 175, 55, 0.3);
  box-shadow: var(--counsel-glow);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.counsel-title {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 800;
  color: white;
  margin: 0 0 16px;
  line-height: 1.1;
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.counsel-subtitle {
  font-size: 1.4rem;
  color: rgba(255, 255, 255, 0.9);
  max-width: 700px;
  margin: 0 auto;
  line-height: 1.6;
}

/* Smart Legal Needs Analyzer */
.legal-analyzer {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 24px;
  padding: 40px;
  margin: 0 auto 40px;
  max-width: 900px;
  box-shadow: var(--card-shadow);
  border: 1px solid rgba(212, 175, 55, 0.2);
  position: relative;
  z-index: 1;
}

.analyzer-header {
  text-align: center;
  margin-bottom: 30px;
}

.analyzer-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--jc-ink);
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.strategic-indicator {
  background: linear-gradient(135deg, var(--counsel-gold), #b8860b);
  color: white;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 0.8rem;
  font-weight: 600;
  animation: pulse 2s infinite;
}

/* Legal Complexity Scanner */
.complexity-scanner {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 30px;
}

.complexity-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 24px;
  border: 2px solid #e2e8f0;
  transition: all 0.3s ease;
  cursor: pointer;
}

.complexity-card.active {
  border-color: var(--counsel-gold);
  background: rgba(212, 175, 55, 0.05);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
}

.complexity-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--jc-ink);
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.complexity-options {
  display: grid;
  gap: 8px;
}

.complexity-option {
  padding: 8px 12px;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.complexity-option:hover {
  border-color: var(--counsel-gold);
  background: rgba(212, 175, 55, 0.05);
}

.complexity-option.selected {
  border-color: var(--counsel-gold);
  background: var(--counsel-gold);
  color: white;
  font-weight: 600;
}

/* AI Legal Analysis */
.legal-analysis {
  background: linear-gradient(135deg, #1f2937, #374151);
  color: white;
  border-radius: 16px;
  padding: 24px;
  margin: 30px 0;
  position: relative;
  overflow: hidden;
  display: none;
}

.legal-analysis.active {
  display: block;
  animation: slideIn 0.6s ease-out;
}

.legal-analysis::before {
  content: '⚖️';
  position: absolute;
  top: -10px;
  right: -10px;
  font-size: 4rem;
  opacity: 0.2;
}

.analysis-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.analysis-title {
  font-size: 1.4rem;
  font-weight: 700;
}

.legal-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.legal-metric {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.metric-icon {
  font-size: 2rem;
  margin-bottom: 8px;
  display: block;
}

.metric-label {
  font-size: 0.85rem;
  opacity: 0.8;
  margin-bottom: 4px;
}

.metric-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--counsel-gold);
}

.urgency-level {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: 600;
  display: inline-block;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.urgency-critical {
  background: rgba(239, 68, 68, 0.2);
  color: #fca5a5;
}

.urgency-high {
  background: rgba(245, 158, 11, 0.2);
  color: #fcd34d;
}

.urgency-medium {
  background: rgba(16, 185, 129, 0.2);
  color: #86efac;
}

/* Cost Estimator */
.cost-estimator {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 20px;
  margin-top: 20px;
}

.cost-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.cost-breakdown {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
}

.cost-item {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 12px;
  text-align: center;
}

.cost-label {
  font-size: 0.8rem;
  opacity: 0.8;
  margin-bottom: 4px;
}

.cost-amount {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--counsel-gold);
}

/* Service Package Matrix */
.package-matrix {
  background: white;
  border-radius: 20px;
  padding: 30px;
  margin: 30px 0;
  box-shadow: var(--card-shadow);
}

.matrix-header {
  text-align: center;
  margin-bottom: 30px;
}

.matrix-title {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--jc-ink);
  margin-bottom: 12px;
}

.package-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.package-card {
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 16px;
  padding: 24px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.package-card:hover {
  border-color: var(--counsel-gold);
  transform: translateY(-4px);
  box-shadow: 0 12px 30px rgba(212, 175, 55, 0.15);
}

.package-card.selected {
  border-color: var(--jc-orange);
  background: rgba(255, 77, 0, 0.05);
  box-shadow: var(--glow);
}

.package-card.recommended {
  border-color: var(--counsel-gold);
  background: rgba(212, 175, 55, 0.05);
  box-shadow: var(--counsel-glow);
}

.package-card.recommended::after {
  content: 'AI RECOMMENDED';
  position: absolute;
  top: -8px;
  right: 16px;
  background: var(--counsel-gold);
  color: white;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 700;
}

.package-name {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--jc-ink);
  margin-bottom: 8px;
}

.package-price {
  font-size: 0.9rem;
  color: var(--counsel-gold);
  font-weight: 600;
  margin-bottom: 12px;
}

.package-desc {
  color: #64748b;
  font-size: 0.95rem;
  line-height: 1.4;
  margin-bottom: 16px;
}

.package-features {
  list-style: none;
  padding: 0;
  margin: 0;
}

.package-features li {
  font-size: 0.9rem;
  padding: 4px 0;
  color: #4b5563;
  position: relative;
  padding-left: 20px;
}

.package-features li::before {
  content: '✓';
  position: absolute;
  left: 0;
  color: var(--success);
  font-weight: bold;
}

/* Premium Form */
.counsel-form {
  background: white;
  border-radius: 24px;
  padding: 40px;
  margin: 40px auto 0;
  max-width: 800px;
  box-shadow: var(--card-shadow);
  position: relative;
  z-index: 1;
}

.form-section {
  margin-bottom: 40px;
}

.section-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--jc-ink);
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid var(--counsel-gold);
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.form-input {
  width: 100%;
  padding: 14px 16px;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.form-input:focus {
  border-color: var(--counsel-gold);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
  outline: none;
}

.form-select {
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
  padding-right: 40px;
}

.textarea-input {
  min-height: 120px;
  resize: vertical;
  grid-column: 1 / -1;
}

/* Submit Button */
.submit-section {
  text-align: center;
  padding-top: 30px;
  border-top: 1px solid #e2e8f0;
}

.submit-button {
  background: linear-gradient(135deg, var(--counsel-gold), #b8860b);
  color: white;
  padding: 18px 48px;
  border: none;
  border-radius: 16px;
  font-size: 1.3rem;
  font-weight: 700;
  cursor: pointer;
  box-shadow: var(--counsel-glow);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.submit-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.4s ease;
}

.submit-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(212, 175, 55, 0.4);
}

.submit-button:hover::before {
  left: 100%;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .jc-counsel-intake {
    padding: 20px 15px;
  }
  
  .legal-analyzer,
  .counsel-form {
    padding: 25px 20px;
    border-radius: 16px;
  }
  
  .counsel-title {
    font-size: 2.5rem;
  }
  
  .complexity-scanner {
    grid-template-columns: 1fr;
  }
  
  .legal-metrics {
    grid-template-columns: 1fr;
  }
  
  .package-grid {
    grid-template-columns: 1fr;
  }
  
  .form-grid {
    grid-template-columns: 1fr;
  }
  
  .cost-breakdown {
    grid-template-columns: 1fr;
  }
}
</style>

<div class="jc-counsel-intake" id="counselIntake">
  <!-- Strategic Header -->
  <div class="counsel-header">
    <div class="strategic-badge">
      <span>⚖️</span>
      <span>Strategic Legal Counsel</span>
    </div>
    <h1 class="counsel-title">Strategic Legal Partnership Assessment</h1>
    <p class="counsel-subtitle">AI-enhanced legal needs analysis that identifies gaps in your current legal infrastructure</p>
  </div>

  <!-- Smart Legal Needs Analyzer -->
  <div class="legal-analyzer">
    <div class="analyzer-header">
      <h2 class="analyzer-title">
        <span>Smart Legal Needs Scanner</span>
        <span class="strategic-indicator">AI-Powered</span>
      </h2>
      <p class="calculator-subtitle">Select your current legal priorities for intelligent complexity analysis and strategic recommendations</p>
    </div>

    <!-- Legal Complexity Scanner -->
    <div class="complexity-scanner">
      <div class="complexity-card" onclick="activateComplexityCard(this)">
        <h3 class="complexity-title">
          <span>📄</span>
          <span>Contract Needs</span>
        </h3>
        <div class="complexity-options">
          <div class="complexity-option" onclick="selectComplexity(this, 'contracts', 'review')">Contract Review</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'contracts', 'drafting')">Contract Drafting</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'contracts', 'negotiation')">Negotiation Support</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'contracts', 'templates')">Template Creation</div>
        </div>
      </div>
      
      <div class="complexity-card" onclick="activateComplexityCard(this)">
        <h3 class="complexity-title">
          <span>⚡</span>
          <span>Urgency Level</span>
        </h3>
        <div class="complexity-options">
          <div class="complexity-option" onclick="selectComplexity(this, 'urgency', 'immediate')">Immediate (This Week)</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'urgency', 'urgent')">Urgent (2 Weeks)</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'urgency', 'standard')">Standard (1 Month)</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'urgency', 'planning')">Planning Ahead</div>
        </div>
      </div>
      
      <div class="complexity-card" onclick="activateComplexityCard(this)">
        <h3 class="complexity-title">
          <span>💼</span>
          <span>Project Scope</span>
        </h3>
        <div class="complexity-options">
          <div class="complexity-option" onclick="selectComplexity(this, 'scope', 'single')">Single Project</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'scope', 'ongoing')">Ongoing Support</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'scope', 'retainer')">Monthly Retainer</div>
          <div class="complexity-option" onclick="selectComplexity(this, 'scope', 'comprehensive')">Comprehensive Package</div>
        </div>
      </div>
    </div>

    <!-- AI Legal Analysis -->
    <div class="legal-analysis" id="legalAnalysis">
      <div class="analysis-header">
        <span>🧠</span>
        <h3 class="analysis-title">AI Legal Complexity Analysis</h3>
      </div>

      <div class="legal-metrics">
        <div class="legal-metric">
          <span class="metric-icon">⚖️</span>
          <div class="metric-label">Legal Complexity</div>
          <div class="metric-value" id="complexityLevel">Analyzing...</div>
        </div>
        <div class="legal-metric">
          <span class="metric-icon">⏱️</span>
          <div class="metric-label">Timeline</div>
          <div class="metric-value" id="timelineEstimate">Analyzing...</div>
        </div>
        <div class="legal-metric">
          <span class="metric-icon">💰</span>
          <div class="metric-label">Investment Range</div>
          <div class="metric-value" id="costRange">Analyzing...</div>
        </div>
        <div class="legal-metric">
          <span class="metric-icon">🎯</span>
          <div class="metric-label">Priority Level</div>
          <div class="metric-value" id="priorityLevel">Analyzing...</div>
        </div>
      </div>

      <!-- Cost Estimator -->
      <div class="cost-estimator">
        <div class="cost-header">
          <span>💡</span>
          <h4 style="margin: 0; font-weight: 700;">Smart Cost Analysis</h4>
        </div>
        <div class="cost-breakdown" id="costBreakdown">
          <!-- Cost items populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <!-- Service Package Matrix -->
  <div class="package-matrix">
    <div class="matrix-header">
      <h2 class="matrix-title">Choose Your Legal Support Level</h2>
      <p class="matrix-subtitle">Select the outside counsel package that best fits your business needs and budget</p>
    </div>

    <div class="package-grid">
      <div class="package-card" onclick="selectPackage('Project')" data-package="Project">
        <h3 class="package-name">Project-Based</h3>
        <div class="package-price">$2,500 - $15,000</div>
        <p class="package-desc">Specific legal projects with defined scope and timeline</p>
        <ul class="package-features">
          <li>Contract review and drafting</li>
          <li>Legal research and analysis</li>
          <li>Negotiation support</li>
          <li>Project-specific guidance</li>
          <li>Fixed or capped fees</li>
        </ul>
      </div>

      <div class="package-card" onclick="selectPackage('Retainer')" data-package="Retainer">
        <h3 class="package-name">Monthly Retainer</h3>
        <div class="package-price">$3,000 - $10,000/month</div>
        <p class="package-desc">Ongoing legal support with predictable monthly investment</p>
        <ul class="package-features">
          <li>Priority response times</li>
          <li>Unlimited consultations</li>
          <li>Contract template library</li>
          <li>Quarterly strategic reviews</li>
          <li>Proactive legal guidance</li>
          <li>Preferred pricing on projects</li>
        </ul>
      </div>

      <div class="package-card" onclick="selectPackage('Strategic')" data-package="Strategic">
        <h3 class="package-name">Strategic Partnership</h3>
        <div class="package-price">$7,500 - $25,000/month</div>
        <p class="package-desc">Comprehensive legal partnership for growing businesses</p>
        <ul class="package-features">
          <li>Dedicated attorney relationship</li>
          <li>Board meeting participation</li>
          <li>Investment round support</li>
          <li>M&A transaction guidance</li>
          <li>Regulatory compliance</li>
          <li>Strategic business counsel</li>
        </ul>
      </div>

      <div class="package-card" onclick="selectPackage('Enterprise')" data-package="Enterprise">
        <h3 class="package-name">Enterprise Counsel</h3>
        <div class="package-price">Custom Engagement</div>
        <p class="package-desc">Full outside general counsel services for established companies</p>
        <ul class="package-features">
          <li>Acting General Counsel</li>
          <li>Legal department management</li>
          <li>Complex transaction leadership</li>
          <li>Litigation management</li>
          <li>Executive team integration</li>
          <li>White-glove service level</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Premium Form -->
  <div class="counsel-form">
    <form id="outsideCounselForm" onsubmit="submitOutsideCounsel(event)">
      <!-- Legal Need Information -->
      <div class="form-section">
        <h3 class="section-title">Legal Requirements</h3>
        <div class="form-grid">
          <select name="primaryNeed" class="form-input form-select" required onchange="updateAnalysis()">
            <option value="">Primary Legal Need</option>
            <option value="contract_review">Contract Review & Analysis</option>
            <option value="contract_drafting">Contract Drafting</option>
            <option value="negotiation_support">Negotiation Support</option>
            <option value="compliance">Regulatory Compliance</option>
            <option value="employment_law">Employment Law</option>
            <option value="ip_protection">Intellectual Property</option>
            <option value="business_transactions">Business Transactions</option>
            <option value="dispute_resolution">Dispute Resolution</option>
            <option value="ongoing_counsel">Ongoing General Counsel</option>
          </select>
          <select name="industry" class="form-input form-select" required onchange="updateAnalysis()">
            <option value="">Industry</option>
            <option value="technology">Technology / Software</option>
            <option value="healthcare">Healthcare / Medical</option>
            <option value="fintech">FinTech / Financial</option>
            <option value="manufacturing">Manufacturing</option>
            <option value="ecommerce">E-commerce / Retail</option>
            <option value="consulting">Professional Services</option>
            <option value="realestate">Real Estate</option>
            <option value="other">Other</option>
          </select>
          <select name="companySize" class="form-input form-select" onchange="updateAnalysis()">
            <option value="">Company Size</option>
            <option value="startup">Startup (1-10 employees)</option>
            <option value="small">Small Business (11-50)</option>
            <option value="medium">Medium Business (51-200)</option>
            <option value="large">Large Business (200+)</option>
          </select>
          <select name="annualRevenue" class="form-input form-select">
            <option value="">Annual Revenue</option>
            <option value="under_1m">Under $1M</option>
            <option value="1m_5m">$1M - $5M</option>
            <option value="5m_25m">$5M - $25M</option>
            <option value="25m_plus">$25M+</option>
          </select>
        </div>
      </div>

      <!-- Project Details -->
      <div class="form-section">
        <h3 class="section-title">Project Scope</h3>
        <div class="form-grid">
          <select name="projectUrgency" class="form-input form-select" required onchange="updateAnalysis()">
            <option value="">Timeline</option>
            <option value="immediate">Immediate (This Week)</option>
            <option value="urgent">Urgent (2 Weeks)</option>
            <option value="standard">Standard (1 Month)</option>
            <option value="flexible">Flexible Timeline</option>
          </select>
          <select name="budgetRange" class="form-input form-select" onchange="updateAnalysis()">
            <option value="">Budget Range</option>
            <option value="under_5k">Under $5,000</option>
            <option value="5k_15k">$5,000 - $15,000</option>
            <option value="15k_50k">$15,000 - $50,000</option>
            <option value="50k_plus">$50,000+</option>
            <option value="ongoing">Ongoing/Retainer</option>
          </select>
          <select name="engagementType" class="form-input form-select">
            <option value="">Preferred Engagement</option>
            <option value="project">Single Project</option>
            <option value="ongoing">Ongoing Relationship</option>
            <option value="retainer">Monthly Retainer</option>
            <option value="hybrid">Hybrid Approach</option>
          </select>
          <select name="decisionMaker" class="form-input form-select">
            <option value="">Decision Authority</option>
            <option value="ceo">CEO/Founder</option>
            <option value="legal_team">In-House Legal Team</option>
            <option value="operations">Operations Team</option>
            <option value="board">Board Decision</option>
          </select>
          <textarea name="projectDescription" class="form-input textarea-input" placeholder="Describe your legal needs, specific challenges, or projects requiring attention..." required></textarea>
        </div>
      </div>

      <!-- Contact Information -->
      <div class="form-section">
        <h3 class="section-title">Contact Information</h3>
        <div class="form-grid">
          <input type="text" name="firstName" class="form-input" placeholder="First Name" required>
          <input type="text" name="lastName" class="form-input" placeholder="Last Name" required>
          <input type="text" name="title" class="form-input" placeholder="Title/Role">
          <input type="text" name="companyName" class="form-input" placeholder="Company Name" required>
          <input type="email" name="email" class="form-input" placeholder="Email Address" required>
          <input type="tel" name="phone" class="form-input" placeholder="Phone Number" required>
        </div>
      </div>

      <!-- Hidden fields for backend integration -->
      <input type="hidden" name="submissionType" value="outside-counsel">
      <input type="hidden" name="source" value="outside-counsel-enhanced">
      <input type="hidden" name="selectedPackage" id="selectedPackageHidden">
      <input type="hidden" name="complexityAnalysis" id="complexityAnalysisHidden">
      <input type="hidden" name="assessmentScore" id="assessmentScoreHidden">

      <div class="submit-section">
        <button type="submit" class="submit-button">
Get My Legal Partnership Analysis
        </button>
        <p class="submit-disclaimer">
  We'll provide you with a comprehensive legal needs analysis, strategic recommendations, and transparent pricing (flat fees where applicable). This consultation request does not create an attorney-client relationship.
        </p>
      </div>
    </form>
  </div>
</div>

<script>
// Smart Outside Counsel Analyzer
class OutsideCounselAnalyzer {
  constructor() {
    this.legalNeeds = {};
    this.selectedComplexities = {};
    this.recommendations = [];
    this.selectedPackage = null;
    this.assessmentScore = 0;
  }
  
  selectComplexity(option, category, value) {
    // Remove other selections in this category
    option.parentNode.querySelectorAll('.complexity-option').forEach(opt => {
      opt.classList.remove('selected');
    });
    
    // Select this option
    option.classList.add('selected');
    this.selectedComplexities[category] = value;
    
    // Activate the parent card
    const card = option.closest('.complexity-card');
    card.classList.add('active');
    
    if (Object.keys(this.selectedComplexities).length >= 2) {
      this.showLegalAnalysis();
      this.generateRecommendations();
    }
  }
  
  showLegalAnalysis() {
    const analysis = document.getElementById('legalAnalysis');
    analysis.classList.add('active');
    
    // Analyze complexity based on selections
    let complexityLevel = 'Medium';
    let timelineEstimate = '2-4 weeks';
    let costRange = '$5K - $15K';
    let priorityLevel = 'Standard';
    let baseScore = 30;
    
    // Contract complexity analysis
    const contractNeed = this.selectedComplexities.contracts;
    if (contractNeed === 'negotiation' || contractNeed === 'drafting') {
      complexityLevel = 'High';
      costRange = '$8K - $25K';
      baseScore += 25;
    } else if (contractNeed === 'review') {
      complexityLevel = 'Medium';
      costRange = '$3K - $12K';
      baseScore += 15;
    }
    
    // Urgency analysis
    const urgency = this.selectedComplexities.urgency;
    if (urgency === 'immediate') {
      priorityLevel = 'Critical';
      timelineEstimate = '1-2 weeks';
      costRange = this.adjustCostForUrgency(costRange, 1.5);
      baseScore += 30;
    } else if (urgency === 'urgent') {
      priorityLevel = 'High';
      timelineEstimate = '2-3 weeks';
      costRange = this.adjustCostForUrgency(costRange, 1.2);
      baseScore += 20;
    }
    
    // Scope analysis
    const scope = this.selectedComplexities.scope;
    if (scope === 'retainer' || scope === 'comprehensive') {
      costRange = '$5K - $25K/month';
      timelineEstimate = 'Ongoing';
      baseScore += 25;
      this.recommendPackage('Retainer');
    } else if (scope === 'ongoing') {
      this.recommendPackage('Strategic');
      baseScore += 20;
    } else {
      this.recommendPackage('Project');
    }
    
    // Update display
    document.getElementById('complexityLevel').textContent = complexityLevel;
    document.getElementById('timelineEstimate').textContent = timelineEstimate;
    document.getElementById('costRange').textContent = costRange;
    document.getElementById('priorityLevel').innerHTML = `<span class="urgency-level urgency-${priorityLevel.toLowerCase()}">${priorityLevel}</span>`;
    
    this.assessmentScore = Math.min(baseScore, 100);
    
    // Generate cost breakdown
    this.generateCostBreakdown();
    
    // Store analysis for backend
    document.getElementById('complexityAnalysisHidden').value = JSON.stringify(this.selectedComplexities);
    document.getElementById('assessmentScoreHidden').value = this.assessmentScore;
  }
  
  adjustCostForUrgency(costRange, multiplier) {
    // Simple cost adjustment for urgency
    const ranges = costRange.match(/\$(\d+)K?\s*-\s*\$(\d+)K?/);
    if (ranges) {
      const low = parseInt(ranges[1]) * (ranges[1].includes('K') ? 1000 : 1);
      const high = parseInt(ranges[2]) * (ranges[2].includes('K') ? 1000 : 1);
      const newLow = Math.round(low * multiplier);
      const newHigh = Math.round(high * multiplier);
      return `$${this.formatCost(newLow)} - $${this.formatCost(newHigh)}`;
    }
    return costRange;
  }
  
  formatCost(amount) {
    if (amount >= 1000) {
      return `${Math.round(amount / 1000)}K`;
    }
    return amount.toString();
  }
  
  generateCostBreakdown() {
    const breakdown = [
      { label: 'Legal Analysis', amount: '$2K - $5K' },
      { label: 'Document Prep', amount: '$1K - $8K' },
      { label: 'Review & Revision', amount: '$1K - $4K' },
      { label: 'Implementation', amount: '$1K - $8K' }
    ];
    
    // Adjust based on complexity
    const urgency = this.selectedComplexities.urgency;
    const scope = this.selectedComplexities.scope;
    
    if (scope === 'retainer' || scope === 'comprehensive') {
      breakdown.push({ label: 'Monthly Retainer', amount: '$3K - $15K' });
    }
    
    if (urgency === 'immediate') {
      breakdown.push({ label: 'Rush Premium', amount: '+20-50%' });
    }
    
    const container = document.getElementById('costBreakdown');
    container.innerHTML = breakdown.map(item => `
      <div class="cost-item">
        <div class="cost-label">${item.label}</div>
        <div class="cost-amount">${item.amount}</div>
      </div>
    `).join('');
  }
  
  recommendPackage(packageType) {
    // Remove existing recommendations
    document.querySelectorAll('.package-card').forEach(card => {
      card.classList.remove('recommended');
    });
    
    // Add recommendation to matching card
    const targetCard = document.querySelector(`[data-package="${packageType}"]`);
    if (targetCard) {
      targetCard.classList.add('recommended');
    }
  }
  
  generateRecommendations() {
    // Generate strategic recommendations based on selections
    this.recommendations = [];
    
    const contractNeed = this.selectedComplexities.contracts;
    const urgency = this.selectedComplexities.urgency;
    const scope = this.selectedComplexities.scope;
    
    if (contractNeed === 'negotiation') {
      this.recommendations.push('Negotiate from position of strength with expert legal guidance');
    }
    
    if (urgency === 'immediate') {
      this.recommendations.push('Fast-track legal review with priority attorney assignment');
    }
    
    if (scope === 'retainer') {
      this.recommendations.push('Monthly retainer provides cost predictability and priority access');
    }
  }
  
  updateAnalysis() {
    // Additional analysis based on form selections
    const primaryNeed = document.querySelector('select[name="primaryNeed"]').value;
    const industry = document.querySelector('select[name="industry"]').value;
    const urgency = document.querySelector('select[name="projectUrgency"]').value;
    
    let additionalScore = 0;
    
    // Primary need scoring
    const needScores = {
      'contract_review': 15,
      'contract_drafting': 25,
      'negotiation_support': 30,
      'compliance': 20,
      'business_transactions': 25,
      'ongoing_counsel': 35
    };
    additionalScore += needScores[primaryNeed] || 10;
    
    // Industry complexity
    const industryComplexity = {
      'technology': 20,
      'healthcare': 25,
      'fintech': 30,
      'manufacturing': 15
    };
    additionalScore += industryComplexity[industry] || 10;
    
    // Urgency premium
    const urgencyScores = {
      'immediate': 25,
      'urgent': 15,
      'standard': 10
    };
    additionalScore += urgencyScores[urgency] || 5;
    
    this.assessmentScore = Math.min(this.assessmentScore + additionalScore, 100);
    document.getElementById('assessmentScoreHidden').value = this.assessmentScore;
  }
}

// Global functions
function activateComplexityCard(card) {
  // Visual feedback only - actual selection happens in selectComplexity
}

function selectComplexity(option, category, value) {
  event.stopPropagation();
  analyzer.selectComplexity(option, category, value);
}

function selectPackage(packageType) {
  // Remove previous selections
  document.querySelectorAll('.package-card').forEach(card => {
    card.classList.remove('selected');
  });
  
  // Highlight selected
  const selectedCard = document.querySelector(`[data-package="${packageType}"]`);
  selectedCard.classList.add('selected');
  
  analyzer.selectedPackage = packageType;
  document.getElementById('selectedPackageHidden').value = packageType;
}

function updateAnalysis() {
  analyzer.updateAnalysis();
}

async function submitOutsideCounsel(event) {
  event.preventDefault();
  
  const form = document.getElementById('outsideCounselForm');
  const formData = new FormData(form);
  
  // Convert to object for JSON submission
  const data = {};
  for (let [key, value] of formData.entries()) {
    data[key] = value;
  }
  
  // Add analyzer data
  data.legalComplexities = analyzer.selectedComplexities;
  data.aiRecommendations = analyzer.recommendations;
  data.selectedPackage = analyzer.selectedPackage;
  data.assessmentScore = analyzer.assessmentScore;
  data.timestamp = new Date().toISOString();
  
  // Submit to backend
  try {
    const button = document.querySelector('.submit-button');
    const originalText = button.textContent;
    button.textContent = 'Analyzing Legal Requirements...';
    button.disabled = true;
    
    const response = await fetch('https://estate-intake-system.onrender.com/add-subscriber', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });
    
    const result = await response.json();
    
    if (result.ok) {
      // Success - redirect to thank you page
      window.location.href = 'https://www.jacobscounsellaw.com/thank-you?type=outside-counsel';
    } else {
      throw new Error(result.error || 'Submission failed');
    }
  } catch (error) {
    console.error('Outside counsel submission error:', error);
    alert('There was an error submitting your information. Please try again or contact us directly.');
    
    const button = document.querySelector('.submit-button');
    button.textContent = 'Get My Legal Strategy & Pricing';
    button.disabled = false;
  }
}

// Initialize analyzer
const analyzer = new OutsideCounselAnalyzer();

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  // Any initialization code
});
</script>
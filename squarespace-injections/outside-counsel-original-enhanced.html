<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Outside Counsel Services | Your Strategic Legal Partner | Jacobs Counsel</title>
<style>
  :root {
    --jc-orange: #ff4d00;
    --jc-ink: #0f172a;
    --bg: #ffffff;
    --ink: #0f172a;
    --ink2: #64748b;
    --line: #e2e8f0;
    --ok: #059669;
    --err: #dc2626;
    --card: #ffffff;
    --muted: #f8fafc;
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
    --ai-glow: 0 0 20px rgba(255, 77, 0, 0.2);
    --success-glow: 0 0 20px rgba(5, 150, 105, 0.2);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--ink);
    line-height: 1.6;
    font-size: 20px;
  }

  .form-wrap {
    max-width: 1000px;
    margin: 0 auto;
    background: var(--bg);
    position: relative;
  }
  
  .jc-bar {
    height: 5px;
    background: linear-gradient(90deg, var(--jc-orange), var(--jc-ink));
  }
  
  /* Enhanced Progress Bar with AI Intelligence */
  .progress-container {
    padding: 14px 20px 12px;
    background: linear-gradient(135deg, var(--muted), #ffffff);
    border-bottom: 1px solid var(--line);
    position: relative;
  }

  .progress-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--jc-orange), var(--ok));
    opacity: 0.3;
  }

  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .progress-label {
    font-size: 16px;
    color: var(--ink2);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .ai-score {
    background: linear-gradient(135deg, var(--jc-orange), #e63900);
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
  
  .prog-bar {
    display: flex;
    gap: 2px;
  }

  .prog-seg {
    flex: 1;
    height: 6px;
    background: var(--line);
    border-radius: 3px;
    transition: all .4s ease;
    position: relative;
    overflow: hidden;
  }

  .prog-seg::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    transition: left 0.6s ease;
  }
  
  .prog-seg.done { 
    background: var(--ok);
    box-shadow: var(--success-glow);
  }

  .prog-seg.done::after {
    left: 100%;
  }
  
  .prog-seg.active { 
    background: var(--jc-orange);
    box-shadow: var(--ai-glow);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; transform: scaleY(1.1); }
  }
  
  /* Enhanced Landing Page */
  .landing-hero {
    padding: 35px 20px 25px;
    text-align: center;
    position: relative;
    background: linear-gradient(135deg, rgba(255, 77, 0, 0.02), rgba(255, 77, 0, 0.01));
  }

  .hero-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--jc-orange), #e63900);
    color: white;
    padding: 8px 20px;
    border-radius: 50px;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 16px;
    box-shadow: var(--ai-glow);
    position: relative;
    overflow: hidden;
  }

  .hero-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
  }

  .hero-badge:hover::before {
    left: 100%;
  }
  
  .landing-title {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 800;
    color: var(--ink);
    margin: 0 0 12px;
    line-height: 1.05;
    letter-spacing: -0.02em;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .landing-subtitle {
    font-size: 24px;
    color: var(--ink2);
    margin: 0 auto 30px;
    max-width: 750px;
    line-height: 1.35;
  }

  .what-box {
    background: linear-gradient(135deg, rgba(255,77,0,0.05), rgba(255,77,0,0.02));
    border: 2px solid var(--jc-orange);
    border-radius: 16px;
    padding: 24px;
    margin: 0 20px 30px;
    position: relative;
    box-shadow: var(--ai-glow);
    backdrop-filter: blur(10px);
  }

  .what-box::before {
    content: '🤖';
    position: absolute;
    top: -10px;
    right: 20px;
    font-size: 2rem;
    opacity: 0.3;
  }

  .what-box h2 {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 16px;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .what-box h2::before {
    content: '⚡';
    font-size: 24px;
  }

  .what-list {
    display: grid;
    gap: 12px;
  }

  .what-item {
    display: flex;
    align-items: start;
    gap: 12px;
    padding: 8px 0;
    transition: all 0.3s ease;
  }

  .what-item:hover {
    transform: translateX(4px);
  }

  .what-icon {
    color: var(--ok);
    font-size: 24px;
    margin-top: 2px;
    flex-shrink: 0;
    animation: checkmark 0.6s ease-in-out;
  }

  @keyframes checkmark {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  .what-text {
    flex: 1;
    font-size: 18px;
    color: var(--ink);
    line-height: 1.5;
    font-weight: 500;
  }

  .btn-start {
    width: 100%;
    padding: 20px 40px;
    background: linear-gradient(135deg, var(--jc-orange), #e63900);
    color: white;
    border: 0;
    border-radius: 12px;
    font-size: 20px;
    font-weight: 700;
    cursor: pointer;
    transition: all .3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: var(--ai-glow);
  }

  .btn-start::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.4s ease;
  }

  .btn-start:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(255, 77, 0, 0.3);
  }

  .btn-start:hover::before {
    left: 100%;
  }

  .disclaimer-text {
    font-size: 16px;
    color: var(--ink2);
    text-align: center;
    margin: 16px 0 0;
    font-style: italic;
    opacity: 0.8;
  }

  /* Enhanced Form Steps */
  .step {
    display: none;
    padding: 30px 20px;
    animation: slideIn .4s ease-out;
    position: relative;
  }

  .step.active { display: block; }
  
  @keyframes slideIn {
    from { 
      opacity: 0; 
      transform: translateY(20px);
    }
    to { 
      opacity: 1; 
      transform: translateY(0);
    }
  }
  
  .step-title {
    font-size: 32px;
    font-weight: 800;
    margin: 0 0 8px;
    color: var(--ink);
    letter-spacing: -0.01em;
    position: relative;
    display: inline-block;
  }

  .step-title::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--jc-orange), var(--ok));
    border-radius: 2px;
  }

  .step-desc {
    color: var(--ink2);
    font-size: 19px;
    margin: 0 0 25px;
    line-height: 1.5;
    font-weight: 500;
  }

  /* Smart Form Fields */
  .field {
    margin: 0 0 20px;
    position: relative;
  }

  .field-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
  
  label {
    display: block;
    font-weight: 600;
    margin: 0 0 10px;
    color: var(--ink);
    font-size: 18px;
    transition: all 0.3s ease;
  }

  .req { 
    color: var(--err);
    animation: bounce 1s ease-in-out infinite alternate;
  }

  @keyframes bounce {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  
  input, select, textarea {
    width: 100%;
    padding: 16px 18px;
    border: 2px solid var(--line);
    border-radius: 10px;
    font-size: 18px;
    transition: all .3s ease;
    background: white;
    color: var(--ink);
    font-family: inherit;
    position: relative;
  }

  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--jc-orange);
    box-shadow: 0 0 0 4px rgba(255,77,0,0.1);
    transform: translateY(-2px);
    background: linear-gradient(135deg, #ffffff, #fefefe);
  }

  input:valid:not(:placeholder-shown), 
  select:valid:not([value=""]), 
  textarea:valid:not(:placeholder-shown) {
    border-color: var(--ok);
    background: linear-gradient(135deg, #f0fdf4, #ffffff);
  }
  
  textarea {
    resize: vertical;
    min-height: 120px;
    line-height: 1.5;
  }

  /* AI-Enhanced Service Cards */
  .service-grid {
    display: grid;
    gap: 16px;
    margin: 0 0 25px;
  }

  .service-card {
    padding: 24px;
    border: 2px solid var(--line);
    border-radius: 12px;
    cursor: pointer;
    transition: all .3s ease;
    position: relative;
    background: linear-gradient(135deg, #ffffff, #fefefe);
    overflow: hidden;
  }

  .service-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 77, 0, 0.05), transparent);
    transition: left 0.5s ease;
  }

  .service-card:hover {
    border-color: var(--jc-orange);
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .service-card:hover::before {
    left: 100%;
  }

  .service-card.selected {
    border-color: var(--jc-orange);
    background: linear-gradient(135deg, rgba(255,77,0,0.08), rgba(255,77,0,0.03));
    box-shadow: var(--ai-glow);
    transform: translateY(-2px);
  }

  .service-card.selected::after {
    content: '✓';
    position: absolute;
    top: 20px;
    right: 20px;
    width: 28px;
    height: 28px;
    background: var(--jc-orange);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: bold;
    animation: checkPop 0.3s ease-out;
  }

  @keyframes checkPop {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  .service-title {
    font-size: 22px;
    font-weight: 700;
    margin: 0 0 10px;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .service-desc {
    color: var(--ink2);
    font-size: 17px;
    margin: 0 0 12px;
    line-height: 1.4;
  }

  /* AI Insights Panel */
  .ai-insights {
    background: linear-gradient(135deg, var(--jc-ink), #1e293b);
    color: white;
    border-radius: 16px;
    padding: 20px;
    margin: 20px 0;
    position: relative;
    overflow: hidden;
    display: none;
    animation: slideIn 0.6s ease-out;
  }

  .ai-insights.show {
    display: block;
  }

  .ai-insights::before {
    content: '🧠';
    position: absolute;
    top: -5px;
    right: -5px;
    font-size: 3rem;
    opacity: 0.2;
  }

  .insights-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
  }

  .insights-title {
    font-size: 18px;
    font-weight: 700;
    color: white;
  }

  .complexity-score {
    background: rgba(255, 77, 0, 0.2);
    color: var(--jc-orange);
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .insights-content {
    font-size: 16px;
    line-height: 1.5;
    opacity: 0.9;
  }

  /* Enhanced Navigation */
  .nav {
    display: flex;
    gap: 12px;
    margin-top: 30px;
  }

  .btn {
    padding: 16px 28px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all .3s ease;
    border: none;
    font-size: 18px;
    position: relative;
    overflow: hidden;
  }

  .btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.4s ease;
  }

  .btn:hover::before {
    left: 100%;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--jc-orange), #e63900);
    color: white;
    flex: 1;
    box-shadow: var(--ai-glow);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 77, 0, 0.3);
  }

  .btn-secondary {
    background: var(--muted);
    color: var(--ink);
    border: 2px solid var(--line);
  }

  .btn-secondary:hover {
    background: var(--line);
    transform: translateY(-1px);
  }

  /* Enhanced Success */
  .success-wrap {
    display: none;
    padding: 40px 20px;
    text-align: center;
    animation: successFade .6s ease-out;
  }

  @keyframes successFade {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  .success-icon {
    font-size: 4rem;
    margin: 0 0 20px;
    color: var(--ok);
    animation: successBounce 0.8s ease-out;
  }

  @keyframes successBounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-20px); }
    60% { transform: translateY(-10px); }
  }

  .success-title {
    font-size: 36px;
    font-weight: 800;
    margin: 0 0 12px;
    color: var(--ink);
  }

  .success-msg {
    font-size: 20px;
    color: var(--ink2);
    margin: 0 0 30px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.5;
  }

  .next-steps {
    background: linear-gradient(135deg, var(--muted), #ffffff);
    border-radius: 16px;
    padding: 24px;
    margin: 30px 0;
    text-align: left;
    border: 2px solid var(--line);
    box-shadow: var(--shadow-md);
  }

  .next-steps h3 {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 16px;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .next-steps h3::before {
    content: '🚀';
    font-size: 20px;
  }

  .next-steps ul {
    margin: 0;
    padding-left: 24px;
    color: var(--ink);
    font-size: 18px;
    line-height: 1.8;
  }

  .next-steps li {
    margin-bottom: 8px;
    position: relative;
  }

  .next-steps li::marker {
    color: var(--jc-orange);
    font-weight: bold;
  }

  /* Disclaimer Enhancements */
  .legal-disclaimers {
    background: var(--muted);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    border-left: 4px solid var(--jc-orange);
  }

  .legal-disclaimers h3 {
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 16px;
    color: var(--ink);
  }

  .disclaimer-checkbox {
    margin: 12px 0;
    display: flex;
    align-items: start;
    gap: 12px;
  }

  .disclaimer-checkbox input[type="checkbox"] {
    width: auto;
    margin: 0;
    transform: scale(1.2);
  }

  .disclaimer-checkbox label {
    margin: 0;
    cursor: pointer;
    font-size: 16px;
    line-height: 1.5;
  }

  @media(max-width: 768px) {
    body { font-size: 18px; }
    .landing-title { font-size: 2.25rem; }
    .landing-subtitle { font-size: 20px; }
    .step-title { font-size: 28px; }
    .field-row { grid-template-columns: 1fr; }
    .service-grid { grid-template-columns: 1fr; }
    .nav { flex-direction: column; }
    .btn { width: 100%; }
    
    input, select, textarea {
      font-size: 16px;
      padding: 14px 16px;
    }
    
    label {
      font-size: 17px;
    }

    .progress-header {
      flex-direction: column;
      gap: 8px;
      align-items: start;
    }
  }
</style>
</head>
<body>

<div class="form-wrap">
  <div class="jc-bar"></div>
  
  <!-- Enhanced Progress with AI Scoring -->
  <div class="progress-container">
    <div class="progress-header">
      <div class="progress-label">Step <span id="currentStepNum">1</span> of 7</div>
      <div class="ai-score" id="aiScore">AI Analyzing...</div>
    </div>
    <div class="prog-bar">
      <div class="prog-seg active"></div>
      <div class="prog-seg"></div>
      <div class="prog-seg"></div>
      <div class="prog-seg"></div>
      <div class="prog-seg"></div>
      <div class="prog-seg"></div>
      <div class="prog-seg"></div>
    </div>
  </div>

  <!-- Enhanced Landing Page -->
  <div class="step active" data-step="1">
    <div class="landing-hero">
      <div class="hero-badge">AI-Powered Outside Counsel</div>
      <h1 class="landing-title">Strategic Legal Partnership Assessment</h1>
      <p class="landing-subtitle">AI-enhanced analysis that identifies gaps in your legal infrastructure and provides strategic recommendations for ongoing counsel.</p>
    </div>

    <div class="what-box">
      <h2>AI-Enhanced Process</h2>
      <div class="what-list">
        <div class="what-item">
          <span class="what-icon">✓</span>
          <span class="what-text"><strong>Intelligent Analysis:</strong> AI identifies legal gaps and risk factors in real-time</span>
        </div>
        <div class="what-item">
          <span class="what-icon">✓</span>
          <span class="what-text"><strong>Intelligent Scoring:</strong> Advanced algorithms assess legal needs and risk factors</span>
        </div>
        <div class="what-item">
          <span class="what-icon">✓</span>
          <span class="what-text"><strong>Strategic Recommendations:</strong> Personalized counsel structure and pricing within 24 hours</span>
        </div>
        <div class="what-item">
          <span class="what-icon">✓</span>
          <span class="what-text"><strong>Strategic Partnership:</strong> Ongoing support tailored to your growth trajectory</span>
        </div>
      </div>
    </div>

    <button class="btn-start" onclick="startForm()">Start Strategic Assessment →</button>
    <p class="disclaimer-text">Free strategic assessment. No obligation. Results in 24 hours.</p>
  </div>

  <!-- Step 2: Enhanced Business Information -->
  <div class="step" data-step="2">
    <h2 class="step-title">Business Intelligence</h2>
    <p class="step-desc">Help our AI understand your business context for personalized recommendations</p>

    <div class="field">
      <label>Company Name <span class="req">*</span></label>
      <input name="companyName" required placeholder="Your company name" oninput="analyzeInput()">
    </div>

    <div class="field">
      <label>Your Name <span class="req">*</span></label>
      <input name="contactName" required placeholder="Your full name" oninput="analyzeInput()">
    </div>

    <div class="field-row">
      <div class="field">
        <label>Email <span class="req">*</span></label>
        <input type="email" name="email" required placeholder="you@company.com" oninput="analyzeInput()">
      </div>
      <div class="field">
        <label>Phone</label>
        <input type="tel" name="phone" placeholder="(555) 123-4567" oninput="analyzeInput()">
      </div>
    </div>

    <div class="field-row">
      <div class="field">
        <label>Industry <span class="req">*</span></label>
        <select name="industry" required onchange="analyzeInput()">
          <option value="">Select your industry</option>
          <option>Technology / Software</option>
          <option>E-commerce / Retail</option>
          <option>Healthcare / Biotech</option>
          <option>Financial Services</option>
          <option>Media / Entertainment</option>
          <option>Real Estate</option>
          <option>Professional Services</option>
          <option>Manufacturing</option>
          <option>Consumer Products</option>
          <option>Other</option>
        </select>
      </div>
      <div class="field">
        <label>Business Stage</label>
        <select name="stage" onchange="analyzeInput()">
          <option value="">Select stage</option>
          <option>Idea / Pre-revenue</option>
          <option>Early revenue</option>
          <option>Growth stage</option>
          <option>Scaling</option>
          <option>Mature</option>
        </select>
      </div>
    </div>

    <div class="field-row">
      <div class="field">
        <label>Team Size</label>
        <select name="teamSize" onchange="analyzeInput()">
          <option value="">Select team size</option>
          <option>Just me</option>
          <option>2-5</option>
          <option>6-10</option>
          <option>11-25</option>
          <option>26-50</option>
          <option>50+</option>
        </select>
      </div>
      <div class="field">
        <label>Funding Stage</label>
        <select name="funding" onchange="analyzeInput()">
          <option value="">Select funding</option>
          <option>Bootstrapped</option>
          <option>Pre-seed</option>
          <option>Seed</option>
          <option>Series A</option>
          <option>Series B+</option>
        </select>
      </div>
    </div>

    <div class="field">
      <label>Business Description</label>
      <textarea name="businessDescription" placeholder="Brief description of your business, products/services, and target market..." oninput="analyzeInput()"></textarea>
    </div>

    <!-- AI Insights Panel -->
    <div class="ai-insights" id="aiInsights">
      <div class="insights-header">
        <span>🧠</span>
        <h3 class="insights-title">AI Business Analysis</h3>
        <span class="complexity-score" id="complexityScore">Analyzing...</span>
      </div>
      <div class="insights-content" id="insightsContent">
        Our AI is analyzing your business profile to determine optimal legal support strategies...
      </div>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
    </div>
  </div>

  <!-- Step 3: Enhanced Legal Needs -->
  <div class="step" data-step="3">
    <h2 class="step-title">Legal Priorities</h2>
    <p class="step-desc">Select your key legal focus areas - our AI will prioritize based on your business profile</p>

    <div class="service-grid">
      <div class="service-card" data-service="contracts">
        <div class="service-title">📄 Contract Management</div>
        <div class="service-desc">Review, drafting, and negotiation of business agreements</div>
      </div>
      
      <div class="service-card" data-service="employment">
        <div class="service-title">👥 Employment Law</div>
        <div class="service-desc">HR policies, compliance, and workforce management</div>
      </div>
      
      <div class="service-card" data-service="fundraising">
        <div class="service-title">💰 Fundraising Support</div>
        <div class="service-desc">Investment documentation and investor relations</div>
      </div>
      
      <div class="service-card" data-service="ip">
        <div class="service-title">🛡️ Intellectual Property</div>
        <div class="service-desc">IP strategy, protection, and portfolio management</div>
      </div>
      
      <div class="service-card" data-service="ma">
        <div class="service-title">🤝 M&A Transactions</div>
        <div class="service-desc">Mergers, acquisitions, and strategic partnerships</div>
      </div>
      
      <div class="service-card" data-service="compliance">
        <div class="service-title">⚖️ Regulatory Compliance</div>
        <div class="service-desc">Industry regulations and ongoing compliance management</div>
      </div>
    </div>

    <div class="field">
      <label>Current Legal Challenges</label>
      <textarea name="challenges" placeholder="Describe your most pressing legal issues, upcoming transactions, or areas where you need immediate support..." oninput="analyzeInput()"></textarea>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
    </div>
  </div>

  <!-- Step 4: Enhanced Operations -->
  <div class="step" data-step="4">
    <h2 class="step-title">Business Operations</h2>
    <p class="step-desc">Operational details that impact legal complexity and support needs</p>

    <div class="field-row">
      <div class="field">
        <label>Annual Revenue</label>
        <select name="revenue" onchange="analyzeInput()">
          <option value="">Select revenue range</option>
          <option>Pre-revenue</option>
          <option><$500K</option>
          <option>$500K-$2M</option>
          <option>$2M-$10M</option>
          <option>$10M+</option>
        </select>
      </div>
      <div class="field">
        <label>Monthly Contract Volume</label>
        <select name="contractsVolume" onchange="analyzeInput()">
          <option value="">Select volume</option>
          <option>0-2</option>
          <option>3-5</option>
          <option>6-10</option>
          <option>11+</option>
        </select>
      </div>
    </div>

    <div class="field">
      <label>Geographic Operations</label>
      <select name="international" onchange="analyzeInput()">
        <option value="">Select scope</option>
        <option>US only</option>
        <option>Some international</option>
        <option>Global operations</option>
      </select>
    </div>

    <div class="field">
      <label>Operational Complexity Notes</label>
      <textarea name="opsNotes" placeholder="Additional operational details that affect legal needs (regulatory environment, customer types, distribution channels, etc.)" oninput="analyzeInput()"></textarea>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
    </div>
  </div>

  <!-- Step 5: Enhanced Current Legal -->
  <div class="step" data-step="5">
    <h2 class="step-title">Current Legal Setup</h2>
    <p class="step-desc">Understanding your existing legal infrastructure helps us provide optimal recommendations</p>

    <div class="field">
      <label>Current Legal Counsel</label>
      <select name="currentCounsel" onchange="analyzeInput()">
        <option value="">Select current setup</option>
        <option>None</option>
        <option>In-house counsel</option>
        <option>Outside law firm</option>
        <option>Multiple advisors</option>
      </select>
    </div>

    <div class="field">
      <label>Current Monthly Legal Spend</label>
      <select name="legalSpend" onchange="analyzeInput()">
        <option value="">Select range</option>
        <option><$1K</option>
        <option>$1K-$5K</option>
        <option>$5K-$10K</option>
        <option>$10K+</option>
      </select>
    </div>

    <div class="field">
      <label>Legal Pain Points & Gaps</label>
      <textarea name="legalPainPoints" placeholder="What's not working with your current legal setup? Where do you see gaps or inefficiencies?" oninput="analyzeInput()"></textarea>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
    </div>
  </div>

  <!-- Step 6: Enhanced Preferences -->
  <div class="step" data-step="6">
    <h2 class="step-title">Partnership Preferences</h2>
    <p class="step-desc">Configure your ideal legal partnership for maximum effectiveness</p>

    <div class="field">
      <label>Preferred Engagement Level</label>
      <select name="engagementLevel" onchange="analyzeInput()">
        <option value="">AI will recommend</option>
        <option>Advisory (project-based support)</option>
        <option>Growth (regular strategic counsel)</option>
        <option>Scale (comprehensive legal partnership)</option>
      </select>
    </div>

    <div class="field">
      <label>Communication Style</label>
      <select name="commPreference" onchange="analyzeInput()">
        <option value="">Select preference</option>
        <option>Email updates</option>
        <option>Slack integration</option>
        <option>Regular calls</option>
        <option>Mixed approach</option>
      </select>
    </div>

    <div class="field">
      <label>Implementation Timeline</label>
      <select name="timeline" onchange="analyzeInput()">
        <option value="">Select timeline</option>
        <option>Immediate (this week)</option>
        <option>1-2 weeks</option>
        <option>1 month</option>
        <option>Flexible timeline</option>
      </select>
    </div>

    <div class="field">
      <label>Additional Preferences & Requirements</label>
      <textarea name="preferencesNotes" placeholder="Any specific requirements, preferences for working style, or special considerations for the legal partnership?" oninput="analyzeInput()"></textarea>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
    </div>
  </div>

  <!-- Step 7: Enhanced Acknowledgments -->
  <div class="step" data-step="7">
    <h2 class="step-title">Legal Acknowledgments</h2>
    <p class="step-desc">Review and confirm understanding of our engagement terms</p>

    <div class="legal-disclaimers">
      <h3>Required Acknowledgments <span class="req">*</span></h3>
      
      <div class="disclaimer-checkbox">
        <input type="checkbox" id="disclaimer1" required>
        <label for="disclaimer1">
          I understand this assessment is for <strong>informational purposes only</strong> and does not create an attorney-client relationship.
        </label>
      </div>
      
      <div class="disclaimer-checkbox">
        <input type="checkbox" id="disclaimer2" required>
        <label for="disclaimer2">
          I acknowledge that no attorney-client relationship exists until a <strong>formal engagement letter is signed</strong>.
        </label>
      </div>
      
      <div class="disclaimer-checkbox">
        <input type="checkbox" id="disclaimer3" required>
        <label for="disclaimer3">
          I understand that all legal services are <strong>subject to executed engagement terms</strong> and fee arrangements.
        </label>
      </div>

      <div class="disclaimer-checkbox">
        <input type="checkbox" id="disclaimer4" required>
        <label for="disclaimer4">
          I consent to receive follow-up communications regarding this legal assessment and potential services.
        </label>
      </div>
    </div>

    <div class="nav">
      <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
      <button class="btn btn-primary" onclick="submitForm()">Submit Strategic Assessment →</button>
    </div>
  </div>

  <!-- Enhanced Success -->
  <div class="success-wrap">
    <div class="success-icon">✓</div>
    <h2 class="success-title">Strategic Assessment Complete!</h2>
    <p class="success-msg">Your comprehensive legal analysis and strategic recommendations will be delivered within 24 hours.</p>
    
    <div class="next-steps">
      <h3>What Happens Next</h3>
      <ul>
        <li><strong>Intelligent Analysis:</strong> Our system processes your business complexity and identifies legal gaps</li>
        <li><strong>Custom Strategy:</strong> Personalized legal partnership plan created</li>
        <li><strong>Proposal Delivery:</strong> Detailed recommendations and pricing sent via email</li>
        <li><strong>Rapid Implementation:</strong> Begin legal support within 48 hours of acceptance</li>
        <li><strong>Strategic Partnership:</strong> Ongoing counsel aligned with your growth trajectory</li>
      </ul>
    </div>

    <button class="btn btn-primary" onclick="window.location.href='/'">Return to Homepage</button>
  </div>
</div>

<script>
let currentStep = 1;
const totalSteps = 7;
let formData = {};
let aiScore = 0;
let selectedServices = [];

function startForm() {
  currentStep = 2;
  showStep(2);
  updateAIScore();
}

function showStep(step) {
  document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
  document.querySelector(`.step[data-step="${step}"]`).classList.add('active');
  
  document.getElementById('currentStepNum').textContent = step;
  document.querySelectorAll('.prog-seg').forEach((seg, i) => {
    seg.classList.remove('done', 'active');
    if (i < step - 1) seg.classList.add('done');
    if (i === step - 1) seg.classList.add('active');
  });
  
  window.scrollTo(0, 0);
  updateAIScore();
}

function nextStep() {
  if (validateStep()) {
    saveData();
    if (currentStep < totalSteps) {
      currentStep++;
      showStep(currentStep);
    }
  }
}

function prevStep() {
  if (currentStep > 1) {
    currentStep--;
    showStep(currentStep);
  }
}

function validateStep() {
  const step = document.querySelector(`.step[data-step="${currentStep}"]`);
  const required = step.querySelectorAll('[required]');
  let valid = true;
  
  required.forEach(input => {
    if (input.type === 'checkbox') {
      if (!input.checked) valid = false;
    } else if (!input.value) {
      valid = false;
    }
  });
  
  return valid;
}

function saveData() {
  const step = document.querySelector(`.step[data-step="${currentStep}"]`);
  const inputs = step.querySelectorAll('input, select, textarea');
  
  inputs.forEach(input => {
    if (input.type === 'checkbox') {
      formData[input.name || input.id] = input.checked;
    } else if (input.name) {
      formData[input.name] = input.value;
    }
  });
  
  // Save selected services
  const selectedCards = document.querySelectorAll('.service-card.selected');
  selectedServices = Array.from(selectedCards).map(card => card.dataset.service);
  formData.selectedServices = selectedServices;
  
  localStorage.setItem('outsideCounsel', JSON.stringify(formData));
}

// AI Analysis Functions
function analyzeInput() {
  saveData();
  updateAIScore();
  showAIInsights();
}

function updateAIScore() {
  let score = 0;
  
  // Stage-based scoring
  const stagePoints = {
    'Idea / Pre-revenue': 5,
    'Early revenue': 10,
    'Growth stage': 20,
    'Scaling': 25,
    'Mature': 15
  };
  score += stagePoints[formData.stage] || 0;
  
  // Team size complexity
  const teamPoints = {
    'Just me': 2,
    '2-5': 8,
    '6-10': 15,
    '11-25': 20,
    '26-50': 25,
    '50+': 30
  };
  score += teamPoints[formData.teamSize] || 0;
  
  // Funding complexity
  const fundingPoints = {
    'Bootstrapped': 5,
    'Pre-seed': 10,
    'Seed': 15,
    'Series A': 25,
    'Series B+': 30
  };
  score += fundingPoints[formData.funding] || 0;
  
  // Revenue impact
  const revenuePoints = {
    'Pre-revenue': 2,
    '<$500K': 5,
    '$500K-$2M': 12,
    '$2M-$10M': 20,
    '$10M+': 25
  };
  score += revenuePoints[formData.revenue] || 0;
  
  // Contract volume
  const contractsPoints = {
    '0-2': 2,
    '3-5': 8,
    '6-10': 15,
    '11+': 20
  };
  score += contractsPoints[formData.contractsVolume] || 0;
  
  // International complexity
  const intlPoints = {
    'US only': 2,
    'Some international': 10,
    'Global operations': 20
  };
  score += intlPoints[formData.international] || 0;
  
  // Industry complexity
  const industryPoints = {
    'Technology / Software': 15,
    'Healthcare / Biotech': 20,
    'Financial Services': 25,
    'E-commerce / Retail': 10,
    'Manufacturing': 12,
    'Professional Services': 8
  };
  score += industryPoints[formData.industry] || 5;
  
  // Service selection complexity
  score += selectedServices.length * 3;
  
  // Timeline urgency
  const timelinePoints = {
    'Immediate (this week)': 15,
    '1-2 weeks': 10,
    '1 month': 5,
    'Flexible timeline': 2
  };
  score += timelinePoints[formData.timeline] || 0;
  
  aiScore = Math.min(score, 100);
  
  // Update AI score display
  const scoreElement = document.getElementById('aiScore');
  if (aiScore > 0) {
    scoreElement.textContent = `Complexity: ${aiScore}/100`;
    scoreElement.style.background = aiScore >= 70 ? 'linear-gradient(135deg, #dc2626, #b91c1c)' : 
                                    aiScore >= 40 ? 'linear-gradient(135deg, #f59e0b, #d97706)' : 
                                    'linear-gradient(135deg, #059669, #047857)';
  }
}

function showAIInsights() {
  const insights = document.getElementById('aiInsights');
  const complexityScore = document.getElementById('complexityScore');
  const insightsContent = document.getElementById('insightsContent');
  
  if (Object.keys(formData).length >= 3) {
    insights.classList.add('show');
    
    // Update complexity score
    let complexity = 'Low';
    if (aiScore >= 70) complexity = 'High';
    else if (aiScore >= 40) complexity = 'Medium';
    
    complexityScore.textContent = `${complexity} Complexity`;
    complexityScore.style.background = aiScore >= 70 ? 'rgba(220, 38, 38, 0.2)' : 
                                      aiScore >= 40 ? 'rgba(245, 158, 11, 0.2)' : 
                                      'rgba(5, 150, 105, 0.2)';
    complexityScore.style.color = aiScore >= 70 ? '#fca5a5' : 
                                  aiScore >= 40 ? '#fcd34d' : 
                                  '#86efac';
    
    // Generate AI insights
    let insightText = generateAIInsights();
    insightsContent.textContent = insightText;
  }
}

function generateAIInsights() {
  let insights = [];
  
  if (formData.stage === 'Scaling' || formData.stage === 'Growth stage') {
    insights.push('Growth-stage companies need proactive legal infrastructure');
  }
  
  if (formData.funding === 'Series A' || formData.funding === 'Series B+') {
    insights.push('VC-backed companies require sophisticated legal support');
  }
  
  if (selectedServices.includes('fundraising')) {
    insights.push('Fundraising activities significantly increase legal complexity');
  }
  
  if (formData.international === 'Global operations') {
    insights.push('International operations require multi-jurisdictional expertise');
  }
  
  if (formData.timeline === 'Immediate (this week)') {
    insights.push('Immediate timeline suggests urgent legal priorities');
  }
  
  if (insights.length === 0) {
    insights.push('Our AI is analyzing your business profile for optimal legal strategy recommendations');
  }
  
  return insights.join('. ') + '.';
}

async function submitForm() {
  if (!validateStep()) return;
  saveData();
  
  const btn = event.target;
  const originalText = btn.textContent;
  btn.disabled = true;
  btn.textContent = 'Processing AI Analysis...';
  
  // Calculate final AI score and recommendations
  updateAIScore();
  
  let recommendedPackage = 'Advisory';
  if (aiScore >= 70) recommendedPackage = 'Scale';
  else if (aiScore >= 40) recommendedPackage = 'Growth';
  
  try {
    const response = await fetch('https://estate-intake-system.onrender.com/add-subscriber', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        ...formData,
        timestamp: new Date().toISOString(),
        submissionType: 'outside-counsel',
        source: 'outside-counsel-enhanced',
        aiScore: aiScore,
        recommendedPackage: recommendedPackage,
        selectedServices: selectedServices,
        assessmentScore: aiScore,
        complexity: aiScore >= 70 ? 'High' : aiScore >= 40 ? 'Medium' : 'Low'
      })
    });
    
    const result = await response.json();
    
    if (result.ok) {
      localStorage.removeItem('outsideCounsel');
      document.querySelector('.progress-container').style.display = 'none';
      document.querySelector('.step.active').style.display = 'none';
      document.querySelector('.success-wrap').style.display = 'block';
    } else {
      throw new Error(result.error || 'Submission failed');
    }
  } catch (error) {
    console.error('Outside counsel submission error:', error);
    alert('There was an error submitting your assessment. Please try again or email drew@jacobscounsellaw.com directly.');
    btn.disabled = false;
    btn.textContent = originalText;
  }
}

// Enhanced service card selection
document.addEventListener('click', function(e) {
  if (e.target.closest('.service-card')) {
    const card = e.target.closest('.service-card');
    card.classList.toggle('selected');
    analyzeInput();
  }
});

// Auto-save functionality
document.addEventListener('input', analyzeInput);
document.addEventListener('change', analyzeInput);

// Load saved data on page load
window.addEventListener('load', function() {
  const saved = localStorage.getItem('outsideCounsel');
  if (saved) {
    formData = JSON.parse(saved);
    Object.keys(formData).forEach(key => {
      const input = document.querySelector(`[name="${key}"], #${key}`);
      if (input) {
        if (input.type === 'checkbox') input.checked = formData[key];
        else input.value = formData[key];
      }
    });
    
    // Restore selected services
    if (formData.selectedServices) {
      selectedServices = formData.selectedServices;
      selectedServices.forEach(service => {
        const card = document.querySelector(`[data-service="${service}"]`);
        if (card) card.classList.add('selected');
      });
    }
    
    updateAIScore();
  }
});
</script>

</body>
</html>